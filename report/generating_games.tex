\subsection{Introduction and basic definitions}

In the last section, we showed how to implement MCTS (or more specifically: UCT), which can be used directly to play games in a probabilistic manner.
The plan is to try it out on many different games.
In order to do that, we have to generate the games themselves.
The goal of this chapter is to show how to do just that.

This section talks about computationally generating positional games, given some parameters of said games, which we will cover later.
Since we will use a tool called Nauty to generate games, and since Nauty talks about graphs, it is slightly more appropriate to talk about hyper-graphs in place of positional games.

\begin{definition}
  A \emph{hypergraph} is a set of \emph{vertices}, $V$, together with a list of \emph{hyperedges} $E$, which are simply non-empty subsets of $V$.
\end{definition}

A positional game is equivalent to a hypergraph, if we take the so-called winning sets to be the hyperedges.

\subsection{Nauty and hypergraphs}


Nauty is a tool to generate and work with graphs, and can be downloaded at http://cs.anu.edu.au/people/bdm/nauty/.
We are particularly interested in the tools \texttt{genbg} and \texttt{showg}.

\texttt{genbg} is used to generate (non-isomorphic) bipartite graphs. By default it will output the graphs in the very compact g6 format.
\texttt{showg} is used to turn these g6-formatted graphs into more human-readable form.

A bipartite graph corresponds to a hypergraph in the following manner.
Let us say that the two colors are red and blue. Then we can decide that the red vertices correspond exactly with the set of vertices in our hypergraph.
We can make the blue vertices correspond to hyperedges by defining the hyper edge for a given blue vertex as those red vertices which are connected to it.


\subsection{Choosing the command line switches}
\label{sec:nautycommandline}

In this section, we work out as an example all of the hypergraphs with 2 vertices and 3 hyperedges, using Nauty.
I will assume that Nauty has been installed and your current directory is wherever you installed Nauty or have \texttt{genbg} and \texttt{showg} available.

Here is the command to generate the bipartite graphs.

\begin{code}
   $ ./genbg 2 3 | ./showg
\end{code}

The output (in tabular form here, for compactness) is as follows:

\begin{tabular}{|p{1.5in} | p{1.5in} | p{1.5in} |}
\begin{minipage}{1.5in}
\begin{output}
Graph 1, order 5.
0 : ;
1 : ;
2 : ;
3 : ;
4 : ;

\end{output}
\end{minipage}
&
\begin{minipage}{1.5in}
\begin{output}
Graph 5, order 5.
0 : 3;
1 : 4;
2 : ;
3 : 0;
4 : 1;

\end{output}
\end{minipage}
& 
\begin{minipage}{1.5in}
\begin{output}
Graph 9, order 5.
0 : 2 3 4;
1 : 4;
2 : 0;
3 : 0;
4 : 0 1;

\end{output}
\end{minipage}
\\
\begin{minipage}{1.5in}
\begin{output}
Graph 2, order 5.
0 : 4;
1 : ;
2 : ;
3 : ;
4 : 0;

\end{output}
\end{minipage}
&
\begin{minipage}{1.5in}
\begin{output}
Graph 6, order 5.
0 : 3 4;
1 : 4;
2 : ;
3 : 0;
4 : 0 1;

\end{output}
\end{minipage}
&
\begin{minipage}{1.5in}
\begin{output}
Graph 10, order 5.
0 : 2 4;
1 : 3;
2 : 0;
3 : 1;
4 : 0;

\end{output}
\end{minipage}
\\
\begin{minipage}{1.5in}
\begin{output}
Graph 3, order 5.
0 : 4;
1 : 4;
2 : ;
3 : ;
4 : 0 1;

\end{output}
\end{minipage}
&
\begin{minipage}{1.5in}
\begin{output}
Graph 7, order 5.
0 : 3 4;
1 : 3 4;
2 : ;
3 : 0 1;
4 : 0 1;

\end{output}
\end{minipage}
&
\begin{minipage}{1.5in}
\begin{output}
Graph 11, order 5.
0 : 2 4;
1 : 3 4;
2 : 0;
3 : 1;
4 : 0 1;

\end{output}
\end{minipage}
\\
\begin{minipage}{1.5in}
\begin{output}
Graph 4, order 5.
0 : 3 4;
1 : ;
2 : ;
3 : 0;
4 : 0;

\end{output}
\end{minipage}
&
\begin{minipage}{1.5in}
\begin{output}
Graph 8, order 5.
0 : 2 3 4;
1 : ;
2 : 0;
3 : 0;
4 : 0;

\end{output}
\end{minipage}
&
\begin{minipage}{1.5in}
\begin{output}
Graph 12, order 5.
0 : 2 3 4;
1 : 3 4;
2 : 0;
3 : 0 1;
4 : 0 1;

\end{output}
\end{minipage}
\\
&
&
\begin{minipage}{1.5in}
\begin{output}
Graph 13, order 5.
0 : 2 3 4;
1 : 2 3 4;
2 : 0 1;
3 : 0 1;
4 : 0 1;

\end{output}
\end{minipage}
\\
\end{tabular}


The first two vertices are from the first color and correspond to the vertices of our would-be hypergraphs.
The remaining three vertices are of the second color and correspond to the would-be hyperedges.
Clearly, there are some issues to work out. Firstly, note that \texttt{Graph 1} does not give us an actual hypergraph: both hyperedges would be empty, under our interpretation, which we do not allow. The same criticism holds for \texttt{Graph 2} and \texttt{Graph 3}.

To get around this, we use the command line switch $\texttt{-dm:n}$ where the \texttt{m} and \texttt{n} are the minimum degree of the first and second class of vertices, respectively.

With something like \texttt{-d0:1} we are saying that the vertices of our hypergraph may be in no hyperedges, but each hyperedge must contain at least 1 vertex, i.e. must not be empty.


\begin{code}
  $ ./genbg 2 3 -d0:1 | ./showg
\end{code}
The output is:

\begin{tabular}{|c|c|c|}
\begin{minipage}{1.5in}
\begin{output}
Graph 1, order 5.
  0 : 2 3 4;
  1 : ;
  2 : 0;
  3 : 0;
  4 : 0;

\end{output}
\end{minipage}

&

\begin{minipage}{1.5in}
\begin{output}
Graph 3, order 5.
  0 : 2 4;
  1 : 3;
  2 : 0;
  3 : 1;
  4 : 0;

\end{output}
\end{minipage}

&

\begin{minipage}{1.5in}
\begin{output}
Graph 5, order 5.
  0 : 2 3 4;
  1 : 3 4;
  2 : 0;
  3 : 0 1;
  4 : 0 1;

\end{output}
\end{minipage}

\\

\begin{minipage}{1.5in}
\begin{output}
Graph 2, order 5.
  0 : 2 3 4;
  1 : 4;
  2 : 0;
  3 : 0;
  4 : 0 1;

\end{output}
\end{minipage}

&

\begin{minipage}{1.5in}
\begin{output}
Graph 4, order 5.
  0 : 2 4;
  1 : 3 4;
  2 : 0;
  3 : 1;
  4 : 0 1;

\end{output}
\end{minipage}

&

\begin{minipage}{1.5in}
\begin{output}
Graph 6, order 5.
  0 : 2 3 4;
  1 : 2 3 4;
  2 : 0 1;
  3 : 0 1;
  4 : 0 1;
\end{output}
\end{minipage}

\\
\end{tabular}


There are still some issues. If we were to try to translate \texttt{Graph 1} to a hypergraph, we would get the same hyper edge three times. That is to say, we would end up with a hypergraph of only a single hyper edge. If we were interested in such a hypergraph, we would have just ran \texttt{./genbg 2 1 -d0:1} to begin with.

This issue is resolved with the command line switch \texttt{-z}, which makes sure that no two vertices in the second class can have the same neighborhood.

\begin{code}
  $ ./genbg 2 3 -z -d0:1 | ./showg
\end{code}
Which yields the output:

\begin{output}
Graph 1, order 5.
  0 : 2 4;
  1 : 3 4;
  2 : 0;
  3 : 1;
  4 : 0 1;

\end{output}
So in the end we have only a single hypergraph in this class. It has two vertices, each with it's own singleton hyperedge plus a hyperedge that contains both of the vertices.
Table \ref{tab:bipartite_hypergraph_correspondence} how this bipartite graph and it's corresponding hypergraph are related.

\begin{center}
\def\arraystretch{1.0}
\begin{table}
\begin{tabular}{c c}
  \def\svgwidth{0.45\columnwidth} \input{bipartite.pdf_tex}
  &
  \def\svgwidth{0.45\columnwidth} \input{hypergraph.pdf_tex}
\end{tabular}
\caption{The bipartite graph, and it's corresponding hypergraph.}
\label{tab:bipartite_hypergraph_correspondence}
\end{table}
\end{center}

Our hypothesis at this point is that a command such as \texttt{./genbg m n -z -d0:1} will generate all non-isomorphic hypergraphs of \texttt{m} vertices and \texttt{n} edges.

In other words we need to prove the following two results.

\begin{definition}
The \emph{neighbourhood} $\mathcal{N}(v) \subset V(G)$ of a vertex $v \in V(G)$ is defined as the set of vertices which have edges connected directly to $v$.
\end{definition}

\begin{definition}
A graph $G$ is said to be \emph{bipartite}, if there are $V_1, V_2 \subset{V(G)}$ such that $V(G) = V_1 \cup V_2$, such that $V_1 \cap V_2 = \emptyset$, and such that $\mathcal{N}(V_1) \subset V_2$ and $\mathcal{N}(V_2) \subset V_1$.
We denote these subsets by $V_1(G)$ and $V_2(G)$, and call them the \emph{first and second classes} of $G$, respectively.
\end{definition}

\begin{lemma}
Let $\mathfrak{B}$ be the set of all bipartite graphs with $n$ vertices in the first class and $m$ vertices in the second class.
Let $\mathfrak{H}$ be the set of all hypergraphs with $n$ vertices and $m$ hyperedges.
Then there is a bijection, up to isomorphism, between $\mathfrak{B}$ and $\mathfrak{H}$.
\end{lemma}
\begin{proof}
Let $G \in \mathfrak{B}$. Define $\varphi(G) \in \mathfrak{H}$ to be the hypergraph given by $(V_1(G), \mathcal{N}(V_2(G)))$.
In this way we have constructed a mapping from $\mathfrak{B}$ to $\mathfrak{H}$, which we claim has the desired properties.

It now remains to be seen that $\varphi$ it injective and surjective up to isomorphism.
To show \emph{injectivity up to isomorphism}, we should show $G \cong G' \Leftrightarrow \varphi(G) \cong \varphi(G')$.
\textbf{TODO: show injectivity}

To show \emph{surjectivity up to isomorphism}, we should show that, given any $H \in \mathfrak{H}$, there is a $G \in \mathfrak{B}$ such that $\varphi(G) \cong H$.
\textbf{TODO: show surjectivity}
\qed
\end{proof}

We shall need a bit more precision, as provided by the following result, which follows immediately from the definition of $\varphi$.

\begin{corollary}
Let $0 \leq d \leq D$. The set $\{ H : d \leq \left\| \mathcal{F}(H) \right\| \leq D \} \subset \mathfrak{H}$ corresponds up to isomorphism, via $\varphi$, to $ \{ G : d \leq \left\| \mathcal{N}(B) \right\| \leq D  \} \subset \mathfrak{B}$.
\end{corollary}


